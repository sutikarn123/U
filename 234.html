<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏≠‡∏á‡∏•‡πá‡∏≠‡∏Å‡∏Ç‡∏≤‡∏¢‡∏Ç‡∏≠‡∏á</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f8f9fa;
        }
        .container {
            max-width: 960px;
            margin-top: 30px;
            margin-bottom: 30px;
            padding: 20px;
            background-color: #fff;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }
        .stall-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 15px;
            margin-top: 20px;
            justify-content: center;
        }
        .stall-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 120px;
            border-radius: 12px;
            border: 2px solid #ccc;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
        }
        .stall-item.available {
            background-color: #e6ffe6; /* Light green */
            border-color: #28a745; /* Green */
            color: #1a7a3a;
        }
        .stall-item.booked {
            background-color: #ffe6e6; /* Light red */
            border-color: #dc3545; /* Red */
            color: #9d293d;
            cursor: not-allowed;
        }
        .stall-item:not(.booked):hover {
            transform: translateY(-5px);
            box-shadow: 0 6px 16px rgba(0, 0, 0, 0.1);
            border-color: #007bff;
        }
        .stall-number {
            font-size: 1.5rem;
            margin-bottom: 5px;
        }
        .stall-status {
            font-size: 0.9rem;
            color: #6c757d;
        }
        .form-floating > label {
            padding-left: 0.75rem;
            padding-right: 0.75rem;
        }
        .form-select, .form-control {
            border-radius: 8px;
        }
        .btn-primary {
            background-color: #007bff;
            border-color: #007bff;
            border-radius: 8px;
            transition: all 0.3s ease;
        }
        .btn-primary:hover {
            background-color: #0056b3;
            border-color: #0056b3;
            transform: translateY(-2px);
        }
        .btn-danger {
            border-radius: 8px;
        }
        .modal-content {
            border-radius: 12px;
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.2);
        }
        .modal-header {
            border-bottom: none;
            padding-bottom: 0;
        }
        .modal-footer {
            border-top: none;
            padding-top: 0;
        }
        .admin-section {
            margin-top: 40px;
            padding-top: 20px;
            border-top: 1px solid #eee;
        }
        .table-responsive {
            margin-top: 20px;
        }
        .table {
            border-radius: 8px;
            overflow: hidden;
        }
        .table thead {
            background-color: #e9ecef;
        }
        .table th, .table td {
            vertical-align: middle;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1 class="text-center mb-4 text-primary">‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏≠‡∏á‡∏•‡πá‡∏≠‡∏Å‡∏Ç‡∏≤‡∏¢‡∏Ç‡∏≠‡∏á üõí</h1>

        <div class="alert alert-info text-center rounded-pill" role="alert">
            ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏•‡πá‡∏≠‡∏Å‡∏ß‡πà‡∏≤‡∏á‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ó‡∏≥‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á
        </div>

        <div id="stallGrid" class="stall-grid">
            <!-- Stalls will be dynamically generated here -->
        </div>

        <hr class="my-5">

        <!-- Admin Section -->
        <div class="admin-section">
            <h2 class="text-center mb-4 text-success">‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ú‡∏π‡πâ‡∏î‡∏π‡πÅ‡∏•‡∏£‡∏∞‡∏ö‡∏ö üîê</h2>
            <p class="text-center text-muted">‡∏õ‡πâ‡∏≠‡∏ô‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏π‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</p>
            <div class="row justify-content-center mb-3">
                <div class="col-md-6">
                    <div class="input-group">
                        <input type="password" id="adminPassword" class="form-control rounded-start-pill" placeholder="‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡∏ú‡∏π‡πâ‡∏î‡∏π‡πÅ‡∏•‡∏£‡∏∞‡∏ö‡∏ö">
                        <button class="btn btn-success rounded-end-pill" type="button" id="adminLoginBtn">‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö</button>
                    </div>
                </div>
            </div>
            <div id="adminData" class="table-responsive" style="display: none;">
                <h3 class="mb-3 text-center">‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</h3>
                <table class="table table-striped table-bordered text-center">
                    <thead>
                        <tr>
                            <th>‡∏•‡πá‡∏≠‡∏Å‡∏ó‡∏µ‡πà</th>
                            <th>‡∏£‡∏´‡∏±‡∏™‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô</th>
                            <th>‡∏ä‡∏∑‡πà‡∏≠-‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•</th>
                            <th>‡πÅ‡∏ú‡∏ô‡∏Å</th>
                            <th>‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</th>
                            <th>‡∏Å‡∏≤‡∏£‡∏Å‡∏£‡∏∞‡∏ó‡∏≥</th>
                        </tr>
                    </thead>
                    <tbody id="adminBookingsTableBody">
                        <!-- Admin bookings will be loaded here -->
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <!-- Booking Modal -->
    <div class="modal fade" id="bookingModal" tabindex="-1" aria-labelledby="bookingModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="bookingModalLabel">‡∏à‡∏≠‡∏á‡∏•‡πá‡∏≠‡∏Å‡∏ó‡∏µ‡πà <span id="selectedStallNumber"></span></h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="bookingForm">
                        <input type="hidden" id="bookingStallId">
                        <div class="mb-3">
                            <div class="form-floating">
                                <input type="text" class="form-control" id="employeeId" placeholder="‡∏£‡∏´‡∏±‡∏™‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô" required>
                                <label for="employeeId">‡∏£‡∏´‡∏±‡∏™‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô</label>
                            </div>
                        </div>
                        <div class="mb-3">
                            <div class="form-floating">
                                <input type="text" class="form-control" id="fullName" placeholder="‡∏ä‡∏∑‡πà‡∏≠-‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•" required>
                                <label for="fullName">‡∏ä‡∏∑‡πà‡∏≠-‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•</label>
                            </div>
                        </div>
                        <div class="mb-3">
                            <div class="form-floating">
                                <select class="form-select" id="department" required>
                                    <option value="">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÅ‡∏ú‡∏ô‡∏Å</option>
                                    <option value="PD-SMT">PD-SMT</option>
                                    <option value="PD-FAT">PD-FAT</option>
                                    <option value="PD-PREP">PD-PREP</option>
                                    <option value="ME-SMT">ME-SMT</option>
                                    <option value="ME-FAT">ME-FAT</option>
                                    <option value="GA&HR">GA&HR</option>
                                    <option value="FT">FT</option>
                                    <option value="IT">IT</option>
                                    <option value="PI">PI</option>
                                    <option value="PE">PE</option>
                                    <option value="PC">PC</option>
                                    <option value="PUR">PUR</option>
                                    <option value="FI">FI</option>
                                    <option value="SALES">SALES</option>
                                    <option value="LCA">LCA</option>
                                    <option value="QA">QA</option>
                                    <option value="TC">TC</option>
                                    <option value="QPD">QPD</option>
                                    <option value="SEC">SEC</option>
                                </select>
                                <label for="department">‡πÅ‡∏ú‡∏ô‡∏Å</label>
                            </div>
                        </div>
                        <div class="mb-3">
                            <div class="form-floating">
                                <select class="form-select" id="productType" required>
                                    <option value="">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</option>
                                    <option value="‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏™‡∏î">‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏™‡∏î</option>
                                    <option value="‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à‡∏£‡∏π‡∏õ">‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à‡∏£‡∏π‡∏õ</option>
                                    <option value="‡∏ú‡∏±‡∏Å">‡∏ú‡∏±‡∏Å</option>
                                    <option value="‡∏ú‡∏•‡πÑ‡∏°‡πâ">‡∏ú‡∏•‡πÑ‡∏°‡πâ</option>
                                    <option value="‡∏Å‡∏¥‡πä‡∏ü‡∏ä‡πá‡∏≠‡∏õ">‡∏Å‡∏¥‡πä‡∏ü‡∏ä‡πá‡∏≠‡∏õ</option>
                                    <option value="‡πÄ‡∏™‡∏∑‡πâ‡∏≠‡∏ú‡πâ‡∏≤">‡πÄ‡∏™‡∏∑‡πâ‡∏≠‡∏ú‡πâ‡∏≤</option>
                                    <option value="‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏™‡∏≥‡∏≠‡∏≤‡∏á">‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏™‡∏≥‡∏≠‡∏≤‡∏á</option>
                                    <option value="‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏î‡∏∑‡πà‡∏°">‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏î‡∏∑‡πà‡∏°</option>
                                    <option value="‡∏≠‡∏∑‡πà‡∏ô ‡πÜ">‡∏≠‡∏∑‡πà‡∏ô ‡πÜ (‡πÇ‡∏õ‡∏£‡∏î‡∏£‡∏∞‡∏ö‡∏∏)</option>
                                </select>
                                <label for="productType">‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</label>
                            </div>
                        </div>
                        <div class="mb-3" id="otherProductTypeInput" style="display: none;">
                            <div class="form-floating">
                                <input type="text" class="form-control" id="otherProduct" placeholder="‡∏£‡∏∞‡∏ö‡∏∏‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏≠‡∏∑‡πà‡∏ô ‡πÜ">
                                <label for="otherProduct">‡∏£‡∏∞‡∏ö‡∏∏‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏≠‡∏∑‡πà‡∏ô ‡πÜ</label>
                            </div>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</button>
                    <button type="button" class="btn btn-primary" id="saveBookingBtn">‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Confirmation Modal -->
    <div class="modal fade" id="confirmationModal" tabindex="-1" aria-labelledby="confirmationModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="confirmationModalLabel">‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    ‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á‡∏•‡πá‡∏≠‡∏Å‡∏ó‡∏µ‡πà <span id="confirmStallNumber"></span> ‡∏ô‡∏µ‡πâ‡πÉ‡∏ä‡πà‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">‡πÑ‡∏°‡πà</button>
                    <button type="button" class="btn btn-danger" id="confirmCancelBtn">‡πÉ‡∏ä‡πà, ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        const NUM_STALLS = 20;
        const LOCAL_STORAGE_KEY = 'stallBookings';
        const ADMIN_PASSWORD = 'admin123'; // ‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡∏ú‡∏π‡πâ‡∏î‡∏π‡πÅ‡∏•‡∏£‡∏∞‡∏ö‡∏ö (‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡∏µ‡πâ)

        let bookings = [];
        let selectedStallId = null;

        const stallGrid = document.getElementById('stallGrid');
        const bookingModal = new bootstrap.Modal(document.getElementById('bookingModal'));
        const confirmationModal = new bootstrap.Modal(document.getElementById('confirmationModal'));

        const selectedStallNumberSpan = document.getElementById('selectedStallNumber');
        const bookingStallIdInput = document.getElementById('bookingStallId');
        const employeeIdInput = document.getElementById('employeeId');
        const fullNameInput = document.getElementById('fullName');
        const departmentSelect = document.getElementById('department');
        const productTypeSelect = document.getElementById('productType');
        const otherProductTypeInputDiv = document.getElementById('otherProductTypeInput');
        const otherProductInput = document.getElementById('otherProduct');
        const saveBookingBtn = document.getElementById('saveBookingBtn');
        const bookingForm = document.getElementById('bookingForm');

        const adminPasswordInput = document.getElementById('adminPassword');
        const adminLoginBtn = document.getElementById('adminLoginBtn');
        const adminDataDiv = document.getElementById('adminData');
        const adminBookingsTableBody = document.getElementById('adminBookingsTableBody');
        const confirmStallNumberSpan = document.getElementById('confirmStallNumber');
        const confirmCancelBtn = document.getElementById('confirmCancelBtn');

        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á‡∏à‡∏≤‡∏Å Local Storage
        function loadBookings() {
            const storedBookings = localStorage.getItem(LOCAL_STORAGE_KEY);
            if (storedBookings) {
                bookings = JSON.parse(storedBookings);
            }
        }

        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á‡∏•‡∏á Local Storage
        function saveBookings() {
            localStorage.setItem(LOCAL_STORAGE_KEY, JSON.stringify(bookings));
        }

        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡∏•‡πá‡∏≠‡∏Å
        function renderStalls() {
            stallGrid.innerHTML = ''; // Clear existing stalls
            for (let i = 1; i <= NUM_STALLS; i++) {
                const stallItem = document.createElement('div');
                stallItem.classList.add('stall-item', 'rounded-3');
                stallItem.setAttribute('data-stall-id', i);

                const booking = bookings.find(b => b.stallId === i);
                if (booking) {
                    stallItem.classList.add('booked');
                    stallItem.innerHTML = `<div class="stall-number">‡∏•‡πá‡∏≠‡∏Å‡∏ó‡∏µ‡πà ${i}</div><div class="stall-status">‡∏ñ‡∏π‡∏Å‡∏à‡∏≠‡∏á‡πÅ‡∏•‡πâ‡∏ß</div>`;
                } else {
                    stallItem.classList.add('available');
                    stallItem.innerHTML = `<div class="stall-number">‡∏•‡πá‡∏≠‡∏Å‡∏ó‡∏µ‡πà ${i}</div><div class="stall-status">‡∏ß‡πà‡∏≤‡∏á</div>`;
                    stallItem.addEventListener('click', () => openBookingModal(i));
                }
                stallGrid.appendChild(stallItem);
            }
        }

        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÄ‡∏õ‡∏¥‡∏î Modal ‡∏à‡∏≠‡∏á
        function openBookingModal(stallId) {
            selectedStallId = stallId;
            selectedStallNumberSpan.textContent = stallId;
            bookingStallIdInput.value = stallId;
            bookingForm.reset(); // Clear form
            otherProductTypeInputDiv.style.display = 'none'; // Hide other product input by default
            bookingModal.show();
        }

        // Event listener ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ "‡∏≠‡∏∑‡πà‡∏ô ‡πÜ"
        productTypeSelect.addEventListener('change', () => {
            if (productTypeSelect.value === '‡∏≠‡∏∑‡πà‡∏ô ‡πÜ') {
                otherProductTypeInputDiv.style.display = 'block';
                otherProductInput.setAttribute('required', 'required');
            } else {
                otherProductTypeInputDiv.style.display = 'none';
                otherProductInput.removeAttribute('required');
            }
        });

        // Event listener ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏õ‡∏∏‡πà‡∏°‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á‡πÉ‡∏ô Modal
        saveBookingBtn.addEventListener('click', () => {
            if (!bookingForm.checkValidity()) {
                bookingForm.reportValidity();
                return;
            }

            const newBooking = {
                stallId: parseInt(bookingStallIdInput.value),
                employeeId: employeeIdInput.value.trim(),
                fullName: fullNameInput.value.trim(),
                department: departmentSelect.value,
                productType: productTypeSelect.value === '‡∏≠‡∏∑‡πà‡∏ô ‡πÜ' ? otherProductInput.value.trim() : productTypeSelect.value
            };

            // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏•‡πá‡∏≠‡∏Å‡∏ô‡∏µ‡πâ‡∏ñ‡∏π‡∏Å‡∏à‡∏≠‡∏á‡πÑ‡∏õ‡πÅ‡∏•‡πâ‡∏ß‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà (‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏Å‡∏£‡∏ì‡∏µ‡∏°‡∏µ‡∏Ñ‡∏ô‡∏à‡∏≠‡∏á‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏Å‡∏±‡∏ô)
            const existingBooking = bookings.find(b => b.stallId === newBooking.stallId);
            if (existingBooking) {
                alert('‡∏•‡πá‡∏≠‡∏Å‡∏ô‡∏µ‡πâ‡∏ñ‡∏π‡∏Å‡∏à‡∏≠‡∏á‡πÑ‡∏õ‡πÅ‡∏•‡πâ‡∏ß ‡πÇ‡∏õ‡∏£‡∏î‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏•‡πá‡∏≠‡∏Å‡∏≠‡∏∑‡πà‡∏ô');
                bookingModal.hide();
                renderStalls(); // ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏•‡πá‡∏≠‡∏Å
                return;
            }

            bookings.push(newBooking);
            saveBookings();
            renderStalls();
            bookingModal.hide();
            alert(`‡∏Ñ‡∏∏‡∏ì‡πÑ‡∏î‡πâ‡∏à‡∏≠‡∏á‡∏•‡πá‡∏≠‡∏Å‡∏ó‡∏µ‡πà ${newBooking.stallId} ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à‡πÅ‡∏•‡πâ‡∏ß!`);
        });

        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ú‡∏π‡πâ‡∏î‡∏π‡πÅ‡∏•‡∏£‡∏∞‡∏ö‡∏ö
        function renderAdminBookings() {
            adminBookingsTableBody.innerHTML = '';
            if (bookings.length === 0) {
                adminBookingsTableBody.innerHTML = `<tr><td colspan="6">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á</td></tr>`;
                return;
            }
            bookings.forEach(booking => {
                const row = adminBookingsTableBody.insertRow();
                row.innerHTML = `
                    <td>${booking.stallId}</td>
                    <td>${booking.employeeId}</td>
                    <td>${booking.fullName}</td>
                    <td>${booking.department}</td>
                    <td>${booking.productType}</td>
                    <td><button class="btn btn-danger btn-sm cancel-booking-btn rounded-pill" data-stall-id="${booking.stallId}">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</button></td>
                `;
            });

            // ‡πÄ‡∏û‡∏¥‡πà‡∏° event listener ‡πÉ‡∏´‡πâ‡∏Å‡∏±‡∏ö‡∏õ‡∏∏‡πà‡∏°‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á
            document.querySelectorAll('.cancel-booking-btn').forEach(button => {
                button.addEventListener('click', (event) => {
                    const stallToCancel = parseInt(event.target.dataset.stallId);
                    confirmStallNumberSpan.textContent = stallToCancel;
                    confirmationModal.show();

                    confirmCancelBtn.onclick = () => {
                        cancelBooking(stallToCancel);
                        confirmationModal.hide();
                    };
                });
            });
        }

        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á
        function cancelBooking(stallId) {
            bookings = bookings.filter(b => b.stallId !== stallId);
            saveBookings();
            renderStalls();
            renderAdminBookings(); // ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏ú‡∏π‡πâ‡∏î‡∏π‡πÅ‡∏•‡∏£‡∏∞‡∏ö‡∏ö
            alert(`‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á‡∏•‡πá‡∏≠‡∏Å‡∏ó‡∏µ‡πà ${stallId} ‡∏ñ‡∏π‡∏Å‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å‡πÅ‡∏•‡πâ‡∏ß`);
        }

        // Event listener ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏õ‡∏∏‡πà‡∏°‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡∏ú‡∏π‡πâ‡∏î‡∏π‡πÅ‡∏•‡∏£‡∏∞‡∏ö‡∏ö
        adminLoginBtn.addEventListener('click', () => {
            if (adminPasswordInput.value === ADMIN_PASSWORD) {
                adminDataDiv.style.display = 'block';
                renderAdminBookings();
            } else {
                alert('‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á');
                adminDataDiv.style.display = 'none';
            }
        });

        // ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡πÅ‡∏≠‡∏õ
        window.onload = function() {
            loadBookings();
            renderStalls();
        };
    </script>
</body>
</html>
